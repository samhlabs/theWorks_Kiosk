/*!
  hey, [be]Lazy.js - v1.2.2 - 2014.05.04 
  A lazy loading and multi-serving image script
  (c) Bjoern Klinggaard - @bklinggaard - http://dinbror.dk/blazy
*/
!function(e){"function"==typeof define&&define.amd?define(e):window.Blazy=e()}(function(){"use strict";function e(e){if(!document.querySelectorAll){var o=document.createStyleSheet();document.querySelectorAll=function(e,t,n,r,s){for(s=document.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(","),n=e.length;n--;){for(o.addRule(e[n],"k:v"),r=s.length;r--;)s[r].currentStyle.k&&t.push(s[r]);o.removeRule(0)}return t}}b=!0,p=[],h=e||{},h.error=h.error||!1,h.offset=h.offset||100,h.success=h.success||!1,h.selector=h.selector||".b-lazy",h.separator=h.separator||"|",h.container=h.container?document.querySelectorAll(h.container):!1,h.errorClass=h.errorClass||"b-error",h.breakpoints=h.breakpoints||!1,h.successClass=h.successClass||"b-loaded",h.src=f=h.src||"data-src",g=window.devicePixelRatio>1,y=d(n,25),z=d(c,50),c(),u(h.breakpoints,function(e){return e.width>=window.screen.width?(f=e.src,!1):void 0}),t()}function t(){i(h.selector),b&&(b=!1,h.container&&u(h.container,function(e){a(e,"scroll",y)}),a(window,"resize",z),a(window,"resize",y),a(window,"scroll",y)),n()}function n(){for(var t=0;v>t;t++){var n=p[t];(r(n)||s(n))&&(e.prototype.load(n),p.splice(t,1),v--,t--)}0===v&&e.prototype.destroy()}function o(e){if(e.offsetWidth>0&&e.offsetHeight>0){var t=e.getAttribute(f)||e.getAttribute(h.src);if(t){var n=t.split(h.separator),o=n[g&&n.length>1?1:0],r=new Image;u(h.breakpoints,function(t){e.removeAttribute(t.src)}),e.removeAttribute(h.src),r.onerror=function(){h.error&&h.error(e,"invalid"),e.className=e.className+" "+h.errorClass},r.onload=function(){"img"===e.nodeName.toLowerCase()?e.src=o:e.style.backgroundImage='url("'+o+'")',e.className=e.className+" "+h.successClass,h.success&&h.success(e)},r.src=o}else h.error&&h.error(e,"missing"),e.className=e.className+" "+h.errorClass}}function r(e){var t=e.getBoundingClientRect(),n=w+h.offset;return t.left>=0&&t.right<=m+h.offset&&(t.top>=0&&t.top<=n||t.bottom<=n&&t.bottom>=0-h.offset)}function s(e){return-1!==(" "+e.className+" ").indexOf(" "+h.successClass+" ")}function i(e){var t=document.querySelectorAll(e);v=t.length;for(var n=v;n--;p.unshift(t[n]));}function c(){w=window.innerHeight||document.documentElement.clientHeight,m=window.innerWidth||document.documentElement.clientWidth}function a(e,t,n){e.attachEvent?e.attachEvent&&e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}function l(e,t,n){e.detachEvent?e.detachEvent&&e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)}function u(e,t){if(e&&t)for(var n=e.length,o=0;n>o&&t(e[o],o)!==!1;o++);}function d(e,t){var n=0;return function(){var o=+new Date;t>o-n||(n=o,e.apply(p,arguments))}}var f,h,m,w,p,v,g,b,y,z;return e.prototype.revalidate=function(){t()},e.prototype.load=function(e){s(e)||o(e)},e.prototype.destroy=function(){h.container&&u(h.container,function(e){l(e,"scroll",y)}),l(window,"scroll",y),l(window,"resize",y),l(window,"resize",z),v=0,p.length=0,b=!0},e}),Modernizr.addTest("boxsizing",function(){return Modernizr.testAllProps("boxSizing")&&(void 0===document.documentMode||document.documentMode>7)}),$(function(){$("html").hasClass("boxsizing")||$("*").each(function(){if("block"==$(this).css("display")){var e,t,n;e=$(this).outerWidth(),t=$(this).width(),n=t-(e-t),$(this).css("width",n)}})}),function(){new Blazy({breakpoints:[{}],success:function(e){setTimeout(function(){var t=e.parentNode;t.className=t.className.replace(/\bloading\b/,"")},200)}})}(),$(function(){$(".full-height").css({height:$(window).height()+"px"}),$(window).resize(function(){$(".full-height").css({height:$(window).height()+"px"})})});